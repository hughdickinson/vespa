{% extends "base.html" %}

{% block content %}
    <h1 class="display-3">The SuperWASP Catalogue of Variable Stars</h1>
    <p class="lead">This interface makes available SuperWASP lightcurves for periodic variable stars that have been classified by Citizen Scientists using the <a href="https://www.zooniverse.org/projects/ajnorton/superwasp-variable-stars">SuperWASP Variable Stars Zooniverse project</a>. It will be updated with new classification results every 6 months. Last update on dd-mm-yyyy.</p>

    <h2>Browse the Catalogue</h2>

    <nav aria-label="Catalogue navigation">
        <ul class="pagination justify-content-end">
          <li class="page-item"><a class="page-link" href="#">Previous</a></li>
          <li class="page-item"><a class="page-link" href="#">1</a></li>
          <li class="page-item"><a class="page-link" href="#">2</a></li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item"><a class="page-link" href="#">Next</a></li>
        </ul>
    </nav>

    <div class="modal fade" id="lightcurveModal" tabindex="-1" aria-labelledby="lightcurveModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="lightcurveModalLabel">Lightcurve</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p><img src="#" alt="" style="width: 100%; height: auto;"></p>
            </div>
          </div>
        </div>
      </div>

    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">SuperWASP ID</th>
                <th scope="col">Period number</th>
                <th scope="col">Period uncertainty</th>
                <th scope="col">Classification</th>
                <th scope="col">Zooniverse ID</th>
                <th scope="col">Lightcurve</th>
            </tr>
        </thead>
        <tbody>
        {% for star in stars %}
            {% for lightcurve in star.foldedlightcurve_set.all %}
            <tr>
                <td>{{ star.superwasp_id }}</td>
                <td>{{ lightcurve.period_number }}</td>
                <td>{{ lightcurve.get_period_uncertainty_display }}</td>
                <td>{{ lightcurve.get_classification_display }}</td>
                <td>{{ lightcurve.zooniversesubject.zooniverse_id }}</td>
                <td>{% if lightcurve.zooniversesubject.image_location %}<a href="#" data-toggle="modal" data-target="#lightcurveModal" data-url="{{ lightcurve.zooniversesubject.image_location }}" data-superwasp-id="{{ star.superwasp_id }}"><img src="{{ lightcurve.zooniversesubject.image_location }}" alt="" style="width: 100px; height: auto;"></a>{% endif %}</td>
            </tr>
            {% endfor %}
        {% endfor %}
        </tbody>
    </table>

    
    <nav aria-label="Catalogue navigation">
        <ul class="pagination justify-content-end">
          <li class="page-item"><a class="page-link" href="#">Previous</a></li>
          <li class="page-item"><a class="page-link" href="#">1</a></li>
          <li class="page-item"><a class="page-link" href="#">2</a></li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item"><a class="page-link" href="#">Next</a></li>
        </ul>
    </nav>

    <div class="jumbotron">
        <h2 class="display-4">Acknowledgements</h2>

        <p class="lead">The SuperWASP project is currently funded and operated by Warwick University and Keele University, and was originally set up by Queenâ€™s University Belfast, the Universities of Keele, St. Andrews and Leicester, the Open University, the Isaac Newton Group, the Instituto de Astrofisica de Canarias, the South African Astronomical Observatory and by STFC.</p>

        <p class="lead">The Zooniverse project on SuperWASP Variable Stars is led by Andrew Norton (The Open University) and builds on work he has done with his former postgraduate students Les Thomas, Stan Payne, Marcus Lohr and Paul Greer, and current postgraduate students Heidi Thiemann & Adam McMaster.</p>

        <p class="lead">The Zooniverse project on SuperWASP Variable Stars was developed with the help of the ASTERICS Horizon2020 project. ASTERICS is supported by the European Commission Framework Programme Horizon 2020 Research and Innovation action under grant agreement n.653477</p>
    </div>

{% endblock %}

{% block bodyEnd %}
<script type="text/javascript">
$('#lightcurveModal').on('show.bs.modal', function (event) {
    var button = $(event.relatedTarget) // Button that triggered the modal
    var url = button.data('url') // Extract info from data-* attributes
    var superwasp_id = button.data('superwasp-id')
    // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
    // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
    var modal = $(this)
    modal.find('.modal-title').text('Lightcurve for ' + superwasp_id)
    modal.find('.modal-body img').attr('src', url)
  })
</script>
{% endblock %}